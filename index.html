<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
            <title>Input Page</title>
    </head>
    <body>
        <h1>Input Page</h1>
        <label for="inputBox">Copy your email thread here:</label>
        <br>
        <textarea id="inputBox" rows="50" cols="60"></textarea>
        <br>
        <button id="yesBtn" onclick="handleYes()">Yes</button>
        <button id="noBtn" onclick="handleNo()">No</button>
        <button id="clarifyBtn" onclick="handleClarify()">Please clarify</button>
        
        <script>
            function handleYes() {
                var result = document.createElement("p");
                result.innerHTML = "yes";
                document.body.appendChild(result);
            }
            
            function handleNo() {
                var inputText = document.getElementById("inputBox").value;
                var xhr = new XMLHttpRequest();
                xhr.open("POST", "http://127.0.0.1:5000/api/gpt3", true);
                xhr.setRequestHeader("Content-Type", "application/json");
                xhr.onreadystatechange = function() {
                    if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
                        var response = JSON.parse(xhr.responseText);
                        var result = document.createElement("p");
                        result.innerHTML = response.response;
                        document.body.appendChild(result);
                    }
                };
                xhr.send(JSON.stringify({
                    "email" : inputText,
                    "model" : "gpt-3.5-turbo",
                    "action": "don't agree",
                }));
            }
            
            function handleClarify() {
                // Leave this function empty for further implementation
            }
        </script>
    </body>
</html>
